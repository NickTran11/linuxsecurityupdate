<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up — Linux Security Update</title>
    <!-- Your existing styles here -->
</head>
<body>
    <!-- Your existing HTML structure -->
    
    <form id="signupForm">
        <div class="form-group">
            <label>Name</label>
            <input type="text" id="name" required>
        </div>
        
        <div class="form-group">
            <label>Email</label>
            <input type="email" id="email" required>
        </div>
        
        <div class="form-group">
            <label>Password</label>
            <input type="password" id="password" required>
        </div>
        
        <div id="errorMessage" style="color: red; display: none;"></div>
        <div id="successMessage" style="color: green; display: none;"></div>
        
        <button type="submit">Sign up</button>
    </form>

    <!-- ADD THIS FIREBASE CODE AT THE END, BEFORE </body> -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        // ⚠️ REPLACE THIS WITH YOUR FIREBASE CONFIG FROM FIREBASE CONSOLE
        const firebaseConfig = {
            apiKey: "AIzaSyDQHzZdUU3xtmmr2uB3FRoEfoR4GQNrvXQ",
            authDomain: "phase3-15c78.firebaseapp.com",
            projectId: "phase3-15c78",
            storageBucket: "phase3-15c78.firebasestorage.app",
            messagingSenderId: "938674937288",
            appId: "1:938674937288:web:9ac26dbc81defb249e34fd",
            measurementId: "G-B04CHWKFS9"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Handle form submission
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            const errorDiv = document.getElementById('errorMessage');
            const successDiv = document.getElementById('successMessage');
            
            // Hide previous messages
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';
            
            try {
                // Create user account
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                // Update user profile with name
                await updateProfile(userCredential.user, {
                    displayName: name
                });
                
                // Show success message
                successDiv.textContent = 'Account created successfully! Redirecting...';
                successDiv.style.display = 'block';
                
                // Redirect to login or dashboard after 2 seconds
                setTimeout(() => {
                    window.location.href = 'login.html'; // or wherever you want
                }, 2000);
                
            } catch (error) {
                // Show error message
                let errorMessage = '';
                switch(error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = 'This email is already registered.';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'Password should be at least 6 characters.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Invalid email address.';
                        break;
                    default:
                        errorMessage = error.message;
                }
                errorDiv.textContent = errorMessage;
                errorDiv.style.display = 'block';
            }
        });
    </script>
</body>
</html>
